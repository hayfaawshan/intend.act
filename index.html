<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Today-Upcoming</title>
	</head>
	<body>
		<!--NAV BAR FOR ROUTING (FEEL FREE TO EDIT ETC)-->
		<nav class="navbar" role="navigation" aria-label="dropdown navigation">
			<div class="navbar-item has-dropdown is-hoverable">
				<a class="navbar-link"> NAV </a>

				<div class="navbar-dropdown">
					<a class="navbar-item" href="journeys/journeys-home.html">
						Journeys Home
					</a>
					<a class="navbar-item" href="community/community-home.html"> Community Home </a>
				</div>
			</div>
		</nav>

    <section class="section">
      <div id="react-container"></div>
    </section>

    <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script type="text/babel">

      const items = [
        { text: 'Speak up in a meeting', today: true },
        { text: 'LGBTQ+ coffee', today: true },
        { text: 'Read "Invisible Women"', today: false },
        { text: 'Network on LinkedIn', today: false },
        { text: 'Mentor meeting', today: false },
        { text: 'Online seminar on bias', today: false }
      ];



      function TaskLine({ text }) {
        return <li>{text} <input type="checkbox"/></li>;
      }

      class TodayUpcomingPage extends React.Component {
        constructor(props) {
          super(props);
          this.state = {
            intentionText: '',
            currentIntentions: []
          };
        }

        componentDidMount() {
          this.setState({
            ...this.state,
            currentIntentions: JSON.parse(localStorage.getItem('intentions') || [])
          });
        }


        filterIntentions() {

        }
        render() {
          const intentionDates = this.state.currentIntentions.map(intention => intention.date);
          const splitIntentionDates = intentionDates.map(date => date.split("T")[0]);
          let todaysIntentions = []
          let upcomingIntentions = []
          for (let i = 0; i < splitIntentionDates.length; i++) {
              if (splitIntentionDates[i] === (new Date()).toISOString().split("T")[0]) {
              todaysIntentions.push(this.state.currentIntentions[i]);
            } else {
              upcomingIntentions.push(this.state.currentIntentions[i]);
            }
          }

          return (
            <div>
                <h1>Today &amp; Upcoming</h1>
                <h2>today</h2>
                <ul>
                  {todaysIntentions.map(intention => <TaskLine text={intention.text} />)}
                </ul>
                <h2>upcoming</h2>
                <ul>
                  {upcomingIntentions.map(intention => <TaskLine text={intention.text} />)}
                </ul>



		</div>
          );
        }
      }

      const reactContainer = document.getElementById('react-container');
      ReactDOM.render(React.createElement(TodayUpcomingPage), reactContainer);

    </script>
	</body>
</html>
