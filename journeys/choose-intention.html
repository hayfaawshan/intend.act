<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Choose Intention</title>
		<link rel="stylesheet" href="../css/custom.css" />
		<link rel="stylesheet" href="../css/choose-intentions.css"/>
	</head>
	<body>
		<!--Navigation-->
    <section>
			<div class="container.is-fullhd">
				<nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
					<div class="navbar-menu">
						<div class="navbar-start">
							<div class="navbar-brand">
								<a class="navbar-item" href="https://codefirstgirls.org.uk/">
									<img src="../assets/CFG.jpg" />
								</a>
								<a class="navbar-item">
									<img src="../assets/vodafone.jpg" />
								</a>
							</div>
						</div>

						<div class="navbar-end">
              <a class="navbar-item" href="journeys-home.html">
                  <img src="../assets/home.png">
              </a>
              <a class="navbar-item">
                <img src="../assets/settings.jpg">
              </a>
            </div>
          </div>
				</nav>
    </section>
    <!--Hero Title -->
    <section class="hero">
      <div class="hero-body">
        <div class="container">
          <h1 class="title header">
            unconscious <br> bias journey
          </h1>
          <h2 class="subtitle">
            new intention
          </h2>
          <div id="react-container"></div>
        </div>
      </div>
    </section>

    <figure class="media">
      <img src="../assets/pencil.jpeg" class="floatRightPencil">

    <a href="../journeys/journeys-home.html">
      <img src="../assets/paper.jpg" class="floatRightPaper">
    </a>
  </figure>

    <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script type="text/babel">

      const suggestedIntentions = [
        'Invite someone to speak in a meeting',
        'Read a chapter of "Invisible Women"',
        'Challenge a discriminatory comment',
      ];

      class Intention {
        constructor(text, date, targetCount, frequency, theme) {
          this.text = text;
          this.date = date;
          this.targetCount = targetCount;
          this.completedCount = 0;
          this.frequency = frequency;
          this.addedTimestamp = new Date();
          this.theme = theme;
        }
      }

      class IntentionsPage extends React.Component {
        constructor(props) {
          super(props);
          this.state = {
            intentionText: '',
            intentionFrequency: '',
            intentionTargetCount: '',
            intentionDate: '',
            intentionTheme: '',
            currentIntentions: []
          };

          this.addClicked = this.addClicked.bind(this);
          this.handleChange = this.handleChange.bind(this);
        }

        componentDidMount() {
          this.setState({
            ...this.state,
            currentIntentions: JSON.parse(localStorage.getItem('intentions') || '[]')
          });
        }

        render() {
          const listItems = this.state.currentIntentions.map((intention) =>
            <li key={intention.addedTimestamp}>{intention.text}</li>
          );
          return (
            <div>
              <h2>Write a new intention</h2>
              <input type="text"
                    name="intentionText"
                    placeholder="Enter new intention"
                    value={this.state.intentionText}
                    onChange={this.handleChange} />
              <input type="number"
                    name="intentionFrequency"
                    placeholder="Enter frequency in days"
                    value={this.state.frequency}
                    onChange={this.handleChange} />
              <input type="number"
                    name="intentionTargetCount"
                    placeholder="Enter how many times you want to do this"
                    value={this.state.targetCount}
                    onChange={this.handleChange} />
              <input type="date"
                    name="intentionDate"
                    placeholder="What date do you want to start?"
                    value={this.state.date}
                    onChange={this.handleChange} />
              <select name="intentionTheme" onChange={this.handleChange}>
                <option value="">--Please choose a theme--</option>
                <option value="reading">Reading a book or article</option>
                <option value="confidence">Confidence</option>
                <option value="makingSpace">Making space for others</option>
              </select>
              <button onClick={this.addClicked}>Add</button>
              <h2>Here are some suggestions</h2>
              <ul>
                <li>Invite someone to speak in a meeting</li>
                <li>Read a chapter of "Invisible Women"</li>
                <li>Challenge a discriminatory comment</li>
                <li>Reflect on mentee group</li>
              </ul>
              <h2>Current Intentions</h2>
              <ul>{listItems}</ul>
            </div>
          );
        }


        addClicked(event) {
          if (this.state.intentionText === '') {
            alert("You can't add a blank intention");
          } else {
            const tomorrow = new Date();
            // The next midnight
            tomorrow.setHours(24, 0, 0, 0);
            const updatedIntentions = [
                ...this.state.currentIntentions,
                new Intention(this.state.intentionText,
                this.state.intentionDate,
                this.state.intentionTargetCount,
                this.state.intentionFrequency,
                this.state.intentionTheme)
            ];
            this.setState({
              ...this.state,
              currentIntentions: updatedIntentions,
              intentionText: '',
              intentionFrequency: '',
              intentionDate: '',
              intentionTargetCount: '',
              intentionTheme:'',
            });
            localStorage.setItem('intentions', JSON.stringify(updatedIntentions));
           // event.preventDefault();
          }
      }

        handleChange(event) {
          this.setState({ ...this.state, [event.target.name]: event.target.value});
        }
      }

      const reactContainer = document.getElementById('react-container');
      ReactDOM.render(React.createElement(IntentionsPage), reactContainer);

    </script>
	</body>
</html>
