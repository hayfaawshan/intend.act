<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> Q&A </title>
    <link rel="stylesheet" href="../css/custom.css">
    <link rel="stylesheet" href="../css/qanda.css">
  </head>
  <body>
    <!--Navigation-->
    <section>
			<div class="container.is-fullhd">
				<nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
					<div class="navbar-menu">
						<div class="navbar-start">
							<div class="navbar-brand">
								<a class="navbar-item" href="https://codefirstgirls.org.uk/">
									<img src="../assets/CFG.jpg" />
								</a>
								<a class="navbar-item">
									<img src="../assets/vodafone.jpg" />
                </a>
                <h4 class="intend-act"> intend. act.</h4>
							</div>
						</div>

						<div class="navbar-end">
              <a class="navbar-item" href="community-home.html">
                  <img src="../assets/home.png">
              </a>
              <a class="navbar-item">
                <img src="../assets/settings.jpg">
              </a>
            </div>
          </div>
				</nav>
    </section>
    <!--Hero Title -->
    <section class="hero">
      <div class="hero-body">
        <div class="container">
          <h1 class="title header">
            community
          </h1>
          <h2 class="subtitle">
            questions and answers
          </h2>
        </div>
      </div>
    </section>

    <figure class="media">
      <a href="community-home.html">
        <img src="../assets/tea-cup.jpeg" class="floatLeft">
      </a>
    </figure>
    <style>
      h2.fixed {
        left: 450px;
        top: 250px;
      }
    </style>
    <div id="react-container"></div>

    <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script type="text/babel">

      const previousQuestions = [
        "‘Why I no longer talk to white people’ - reading  group?     3 answers",
        "Do we have a Hispanic minority group?                                           1 answer",
        "Seeking diverse opinions about remote working                11 answers",
        "Who should I speak to about disability adjustments?          7 answers",
        "Load more...",
      ];

 
      const questionsList = previousQuestions.map(question =>
      <li>{question}</li>);

      function addDays(date, days) {
        let result = new Date(date);
        result.setDate(result.getDate() + parseInt(days));
          return result;
      }


      class question {
      constructor(text) {
      this.text = text;
      this.uniqueKey = Math.random();
        }
      }

      const initialFormValues = {
        questionText: '',
      };

      class questionsPage extends React.Component {
        constructor(props) {
          super(props);
          this.state = {
            ...initialFormValues,
            questionsList: []
          };

          this.addClicked = this.addClicked.bind(this);
          this.handleChange = this.handleChange.bind(this);
        }

        componentDidMount() {
          this.setState({
            ...this.state,
            questionsList: JSON.parse(localStorage.getItem('questions') || '[]')
          });
        }

        render() {
          const listItems = this.state.questionsList.map((question) =>
            <li key={question.uniqueKey}>{question.text}</li>
          );
      

          return (
              <div style={{left: "500px", top: "250px" ,position:'absolute'}}>
              
              <h2 className="new-intention">  ask an anonymous question</h2>
              <input type="text"
                    name="newQuestion"
                    className="enterQuestion"
                    placeholder="ask a question"
                    value={this.state.questionText}
                    onChange={this.handleChange} />
              <h2 className = "previous-questions">previous questions</h2>
              <ul>{listItems}</ul>
            </div>
          );
        }


        addClicked(event) {
          if (this.state.intentionText === '') {
            alert("You can't add a blank question");
          } else {
              this.setState(state => {
                const newQuestions = []
                newQuestions.push(new Question(
                  state.intentionText,
                ));
                const updatedQuestions = [...newQuestions];
                localStorage.setItem('questions', JSON.stringify(updatedQuestions));
                return {
                  ...state,
                  ...initialFormValues, // Reset form
                  updatedQuestions
                };
              });
          }
      }

        handleChange(event) {
          this.setState({ ...this.state, [event.target.name]: event.target.value});
        }
      }

      const reactContainer = document.getElementById('react-container');
      ReactDOM.render(React.createElement(questionsPage), reactContainer);

    </script>
    
  </body>
</html>